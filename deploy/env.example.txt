# Scoliologic Wiki - Environment Configuration Example
# Copy this file to .env and fill in the values

# ===========================================
# ОСНОВНЫЕ НАСТРОЙКИ
# ===========================================

# Домен и SSL
WIKI_DOMAIN=wiki.example.com
LETSENCRYPT_EMAIL=admin@example.com

# Часовой пояс
TZ=Europe/Moscow

# ===========================================
# БАЗА ДАННЫХ (PostgreSQL)
# ===========================================

DB_NAME=scoliologic_wiki
DB_USER=wiki
DB_PASSWORD=change_me_strong_password_123

# ===========================================
# АУТЕНТИФИКАЦИЯ
# ===========================================

# JWT секрет (сгенерируйте: openssl rand -base64 32)
JWT_SECRET=change_me_generate_with_openssl_rand_base64_32

# Manus OAuth (заполните после регистрации приложения)
VITE_APP_ID=
VITE_APP_TITLE=Scoliologic Wiki
VITE_APP_LOGO=
OAUTH_SERVER_URL=
VITE_OAUTH_PORTAL_URL=
OWNER_OPEN_ID=
OWNER_NAME=

# ===========================================
# S3 ХРАНИЛИЩЕ (MinIO)
# ===========================================

MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=change_me_minio_password_123
MINIO_CONSOLE_URL=http://localhost:9001
AWS_S3_BUCKET=wiki-storage
AWS_REGION=us-east-1

# ===========================================
# AI (Ollama)
# ===========================================

# Для локального Ollama (требуется GPU):
# OLLAMA_BASE_URL=http://ollama:11434

# Для внешнего Ollama сервера:
OLLAMA_BASE_URL=http://10.0.0.229:11434

# Модели
EMBEDDING_MODEL=nomic-embed-text
LLM_MODEL=llama3.1:70b

# ===========================================
# МОНИТОРИНГ
# ===========================================

GRAFANA_USER=admin
GRAFANA_PASSWORD=change_me_grafana_password_123
GRAFANA_ROOT_URL=http://grafana.wiki.example.com

# ===========================================
# GITOPS (Pull Agent)
# ===========================================

# Git репозиторий
GIT_REPO_URL=https://github.com/sileade/scoliologic-wiki.git
GIT_BRANCH=main

# GitHub Token (для приватных репозиториев)
# Создайте на: GitHub → Settings → Developer settings → Personal access tokens
GIT_TOKEN=

# Интервал проверки обновлений (в секундах)
PULL_INTERVAL=300

# Автоматический откат при ошибках
ROLLBACK_ON_FAILURE=true

# Количество хранимых бэкапов
KEEP_BACKUPS=5

# ===========================================
# УВЕДОМЛЕНИЯ
# ===========================================

# Telegram
# Создайте бота: @BotFather → /newbot
# Получите chat_id: отправьте сообщение боту и откройте https://api.telegram.org/bot<TOKEN>/getUpdates
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Slack
# Создайте webhook: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=

# ===========================================
# TRAEFIK
# ===========================================

# Уровень логирования (DEBUG, INFO, WARN, ERROR)
TRAEFIK_LOG_LEVEL=INFO

# Basic auth для дашборда Traefik
# Сгенерируйте: htpasswd -nb admin password
TRAEFIK_DASHBOARD_AUTH=admin:$apr1$xxx

# ===========================================
# РЕЗЕРВНОЕ КОПИРОВАНИЕ
# ===========================================

# Хранить бэкапы N дней
BACKUP_RETENTION_DAYS=7

# ===========================================
# FORGE API (Manus)
# ===========================================

BUILT_IN_FORGE_API_URL=
BUILT_IN_FORGE_API_KEY=
VITE_FRONTEND_FORGE_API_URL=
VITE_FRONTEND_FORGE_API_KEY=

# ===========================================
# АНАЛИТИКА
# ===========================================

VITE_ANALYTICS_ENDPOINT=
VITE_ANALYTICS_WEBSITE_ID=

# ===========================================
# ПРОФИЛИ DOCKER COMPOSE
# ===========================================

# Укажите профили через пробел:
# - ollama: локальный AI (требуется GPU)
# - traefik: reverse proxy с SSL
# - monitoring: Prometheus, Grafana, Alertmanager
# - ha: Redis Sentinel для высокой доступности
# - gitops: автоматическое обновление из GitHub
# - backup: автоматическое резервное копирование
# - all: все компоненты

COMPOSE_PROFILES=monitoring gitops
